function changeLanguage(e){console.log(`[Language] A mudar para: ${e}`),localStorage.setItem("selectedLang",e),setLanguage(e),document.querySelectorAll(".language-selector button").forEach(o=>{o.classList.remove("active-lang"),o.textContent.toLowerCase()===e&&o.classList.add("active-lang")})}function setLanguage(e){"undefined"!=typeof translations?(console.log(`[i18n] A aplicar traduções para: ${e}`),document.querySelectorAll("[data-i18n]").forEach(o=>{const t=o.getAttribute("data-i18n"),a=translations[e]?.[t];void 0!==a?o.classList.contains("html-i18n")?o.innerHTML=a:o.textContent=a:console.warn(`[i18n] Tradução não encontrada para chave: ${t}`)}),document.querySelectorAll("option[data-i18n]").forEach(o=>{const t=o.getAttribute("data-i18n"),a=translations[e]?.[t];void 0!==a&&(o.textContent=a)})):console.error("[i18n] Objeto 'translations' não está definido!")}document.addEventListener("DOMContentLoaded",()=>{console.log("[Init] DOM totalmente carregado.");const e=document.getElementById("scrollUpBtn");e?(window.onscroll=function(){e.style.display=window.scrollY>300?"block":"none"},e.onclick=function(){console.log("[Scroll] Botão clicado. Subir para o topo."),window.scrollTo({top:0,behavior:"smooth"})},console.log("[Init] Scroll to top button setup concluído.")):console.warn("[Init] Botão scrollUpBtn não encontrado no DOM.");changeLanguage(localStorage.getItem("selectedLang")||"pt"),loadGallery(),loadTestemunhos();const o=window.innerWidth>window.innerHeight,t=window.innerWidth<768&&!o?"assets/video/mobile-video.mp4":"assets/video/desktop-video.mp4",a=document.getElementById("bg-video");if(a){const e=document.createElement("source");e.setAttribute("src",t),e.setAttribute("type","video/mp4"),a.innerHTML="",a.appendChild(e),a.load(),console.log(`[Video] Video carregado: ${t}`)}});const form=document.getElementById("contactForm");async function loadGallery(){console.log("[Galeria] Início do carregamento via Cloudflare Worker.");const e=document.getElementById("gallery-container"),o=document.getElementById("gallery-spinner");e.innerHTML="";try{const o=await fetch("https://aurea-drive.vonricky940.workers.dev/"),t=await o.json();if(!t||0===t.length)throw new Error("Nenhuma imagem recebida do Worker.");t.forEach(o=>{const t=o.url,a=document.createElement("div");a.className="col-12 col-sm-6 col-md-4 col-lg-3 mb-4";const n=document.createElement("div");n.className="gallery-image";const r=document.createElement("a");r.href=t,r.className="glightbox",r.setAttribute("data-gallery","aurea-gallery"),r.addEventListener("click",e=>e.preventDefault());const l=document.createElement("img");l.src=t,l.alt=o.name,l.loading="lazy",l.className="gallery-img",r.appendChild(l),n.appendChild(r),a.appendChild(n),e.appendChild(a)}),window.GLightbox&&(GLightbox({selector:".glightbox"}),console.log("[Galeria] GLightbox inicializado (Worker).")),console.log("[Galeria] Imagens carregadas com sucesso do Worker.")}catch(o){console.warn("[Galeria] Erro ao carregar via Worker. A carregar fallback local...",o);for(let o=1;o<=6;o++){const t=`assets/img/galeria/img${o}.jpg`,a=document.createElement("div");a.className="col-12 col-sm-6 col-md-4 col-lg-3 mb-4";const n=document.createElement("div");n.className="gallery-image";const r=document.createElement("a");r.href=t,r.className="glightbox",r.setAttribute("data-gallery","aurea-gallery"),r.addEventListener("click",e=>e.preventDefault());const l=document.createElement("img");l.src=t,l.alt=`Imagem ${o}`,l.loading="lazy",l.className="gallery-img",r.appendChild(l),n.appendChild(r),a.appendChild(n),e.appendChild(a)}window.GLightbox&&(GLightbox({selector:".glightbox"}),console.log("[Galeria] Fallback com GLightbox inicializado.")),console.log("[Galeria] Fallback local carregado com sucesso.")}finally{o.style.display="none"}}async function loadTestemunhos(){console.log("[Testemunhos] A carregar...");const e=document.getElementById("testemunhos-container");if(e)try{const o=await fetch("assets/testemunhos.json"),t=await o.json();if(!Array.isArray(t)||0===t.length)throw new Error("Nenhum testemunho disponível.");t.forEach((o,t)=>{const a=document.createElement("div");a.className="carousel-item"+(0===t?" active":"");const n="★".repeat(o.estrelas)+"☆".repeat(5-o.estrelas);a.innerHTML=`\n                <div class="testemunho-card">\n                    <div class="testemunho-estrelas">${n}</div>\n                    <p class="testemunho-comentario">"${o.comentario}"</p>\n                    <p class="testemunho-nome">- ${o.nome}</p>\n                </div>\n            `,e.appendChild(a)}),console.log("[Testemunhos] Carregados com sucesso.")}catch(e){console.error("[Testemunhos] Erro ao carregar:",e.message)}else console.warn("[Testemunhos] Container não encontrado.")}form&&form.addEventListener("submit",function(e){if(console.log("[Form] Submissão iniciada."),e.preventDefault(),"undefined"==typeof grecaptcha)return console.error("[Form] grecaptcha não carregado."),void alert("Erro de verificação. Por favor tente mais tarde.");grecaptcha.ready(function(){console.log("[Form] reCAPTCHA pronto. Executando..."),grecaptcha.execute("6Ldu5WcrAAAAAGD6FpjV029uN38EviyFVu9vlBrs",{action:"submit"}).then(function(e){console.log("[Form] Token reCAPTCHA recebido."),document.getElementById("g-recaptcha-response").value=e,fetch(form.action,{method:"POST",body:new FormData(form)}).then(()=>{console.log("[Form] Formulário enviado com sucesso.");new bootstrap.Modal(document.getElementById("successModal")).show(),form.reset()}).catch(e=>{console.error("[Form] Erro ao enviar:",e),alert("Erro ao enviar. Por favor tente novamente mais tarde.")})})})});